<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lock Screen - NebulaCore</title>
  <link rel="icon" type="image/png" href="/favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #000;
      color: #fff;
      min-height: 100vh;
      overflow: hidden;
    }
    
    .lock-screen {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: url('/images/aurora.jpg');
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: opacity 0.5s ease, filter 0.5s ease;
    }
    
    .lock-screen.blur {
      filter: blur(20px) brightness(0.6);
    }
    
    .time-display {
      font-size: 72px;
      font-weight: 300;
      text-shadow: 0 2px 20px rgba(0,0,0,0.5);
      margin-bottom: 8px;
    }
    
    .date-display {
      font-size: 20px;
      font-weight: 400;
      text-shadow: 0 2px 10px rgba(0,0,0,0.5);
      opacity: 0.9;
      margin-bottom: 30px;
    }
    
    .unlock-hint {
      font-size: 14px;
      opacity: 0.7;
      text-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }
    
    .login-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease;
    }
    
    .login-overlay.active {
      opacity: 1;
      pointer-events: auto;
    }
    
    .login-time {
      font-size: 48px;
      font-weight: 300;
      text-shadow: 0 2px 20px rgba(0,0,0,0.5);
      margin-bottom: 5px;
    }
    
    .login-date {
      font-size: 16px;
      opacity: 0.8;
      text-shadow: 0 2px 10px rgba(0,0,0,0.5);
      margin-bottom: 40px;
    }
    
    .user-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: linear-gradient(135deg, #81c784, #4caf50);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.3s;
    }
    
    .user-avatar:hover {
      transform: scale(1.05);
    }
    
    .user-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .user-avatar svg {
      width: 50px;
      height: 50px;
      fill: rgba(255,255,255,0.9);
    }
    
    .user-name {
      font-size: 16px;
      font-weight: 500;
      margin-bottom: 15px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }
    
    .login-btn {
      padding: 8px 24px;
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 6px;
      color: #fff;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .login-btn:hover {
      background: rgba(255,255,255,0.3);
    }
    
    .guest-section {
      position: fixed;
      bottom: 40px;
      display: flex;
      flex-direction: column;
      align-items: center;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    
    .guest-section.active {
      opacity: 1;
    }
    
    .guest-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .guest-avatar:hover {
      background: rgba(255,255,255,0.3);
    }
    
    .guest-avatar svg {
      width: 30px;
      height: 30px;
      fill: rgba(255,255,255,0.8);
    }
    
    .guest-label {
      font-size: 12px;
      opacity: 0.7;
    }
  </style>
</head>
<body>
  <div class="lock-screen" id="lockScreen">
    <div class="time-display" id="lockTime">12:00 PM</div>
    <div class="date-display" id="lockDate">Wednesday December 17 2025</div>
    <div class="unlock-hint">Press any key to login</div>
  </div>
  
  <div class="login-overlay" id="loginOverlay">
    <div class="login-time" id="loginTime">12:00 PM</div>
    <div class="login-date" id="loginDate">Wednesday December 17 2025</div>
    
    <div class="user-avatar" id="userAvatar" onclick="doLogin()">
      <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
    </div>
    <div class="user-name" id="userName">Guest</div>
    <button class="login-btn" onclick="doLogin()">Login</button>
  </div>
  
  <div class="guest-section" id="guestSection">
    <div class="guest-avatar" onclick="loginAsGuest()">
      <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
    </div>
    <div class="guest-label">Guest</div>
  </div>

  <script>
    let isUnlocked = false;
    
    function updateTime() {
      const now = new Date();
      const hours = now.getHours();
      const minutes = now.getMinutes().toString().padStart(2, '0');
      const ampm = hours >= 12 ? 'PM' : 'AM';
      const hour12 = hours % 12 || 12;
      const timeStr = `${hour12}:${minutes} ${ampm}`;
      
      const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
      const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
      const dateStr = `${days[now.getDay()]} ${months[now.getMonth()]} ${now.getDate()} ${now.getFullYear()}`;
      
      document.getElementById('lockTime').textContent = timeStr;
      document.getElementById('lockDate').textContent = dateStr;
      document.getElementById('loginTime').textContent = timeStr;
      document.getElementById('loginDate').textContent = dateStr;
    }
    
    function unlock() {
      if (isUnlocked) return;
      isUnlocked = true;
      
      const lockScreen = document.getElementById('lockScreen');
      const loginOverlay = document.getElementById('loginOverlay');
      const guestSection = document.getElementById('guestSection');
      
      lockScreen.classList.add('blur');
      loginOverlay.classList.add('active');
      guestSection.classList.add('active');
      
      const savedUser = localStorage.getItem('username');
      const savedPic = localStorage.getItem('profilePicture');
      
      if (savedUser && savedUser !== 'Guest') {
        document.getElementById('userName').textContent = savedUser;
        if (savedPic) {
          document.getElementById('userAvatar').innerHTML = `<img src="${savedPic}" alt="Avatar">`;
        }
      }
    }
    
    function doLogin() {
      const token = localStorage.getItem('userToken');
      if (token && token !== 'guest') {
        window.location.href = '/';
      } else {
        window.location.href = '/auth';
      }
    }
    
    function loginAsGuest() {
      localStorage.setItem('isGuest', 'true');
      localStorage.setItem('guestSessionStart', Date.now().toString());
      localStorage.setItem('userToken', 'guest');
      localStorage.setItem('authToken', 'guest');
      localStorage.setItem('username', 'Guest');
      localStorage.setItem('user', JSON.stringify({
        id: 'guest',
        username: 'Guest',
        profilePicture: '',
        isGuest: true
      }));
      window.location.href = '/';
    }
    
    document.addEventListener('keydown', unlock);
    document.addEventListener('click', unlock);
    document.addEventListener('touchstart', unlock);
    
    updateTime();
    setInterval(updateTime, 1000);
    
    if (!localStorage.getItem('setupComplete') && !localStorage.getItem('userToken')) {
      window.location.href = '/setup';
    }
  </script>
</body>
</html>
